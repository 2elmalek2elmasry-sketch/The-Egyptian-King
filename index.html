<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>FC Mobile Style Game</title>
<style>
  body {
    margin: 0;
    background: #0b6623;
    overflow: hidden;
    touch-action: none;
  }

  canvas {
    display: block;
    margin: auto;
    background: #0f8a3c;
  }

  /* UI */
  .joystick {
    position: absolute;
    bottom: 20px;
    left: 20px;
    width: 120px;
    height: 120px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
  }

  .stick {
    position: absolute;
    width: 50px;
    height: 50px;
    background: rgba(255,255,255,0.6);
    border-radius: 50%;
    left: 35px;
    top: 35px;
  }

  .btn {
    position: absolute;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: rgba(255,255,255,0.7);
    color: black;
    font-weight: bold;
    display: flex;
    justify-content: center;
    align-items: center;
    user-select: none;
  }

  #shoot { bottom: 40px; right: 30px; }
  #pass { bottom: 120px; right: 120px; }
</style>
</head>
<body>

<canvas id="game" width="800" height="500"></canvas>

<div class="joystick" id="joy">
  <div class="stick" id="stick"></div>
</div>

<div class="btn" id="shoot">SHOOT</div>
<div class="btn" id="pass">PASS</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const player = { x: 400, y: 350, r: 12, speed: 3 };
const ball = { x: 400, y: 330, vx: 0, vy: 0, r: 6 };

let moveX = 0;
let moveY = 0;

// JOYSTICK
const joy = document.getElementById("joy");
const stick = document.getElementById("stick");
let joyActive = false;

joy.addEventListener("touchstart", e => joyActive = true);
joy.addEventListener("touchend", e => {
  joyActive = false;
  moveX = moveY = 0;
  stick.style.left = "35px";
  stick.style.top = "35px";
});

joy.addEventListener("touchmove", e => {
  if (!joyActive) return;
  const rect = joy.getBoundingClientRect();
  const t = e.touches[0];
  let x = t.clientX - rect.left - 60;
  let y = t.clientY - rect.top - 60;
  const dist = Math.hypot(x, y);
  if (dist > 40) {
    x *= 40 / dist;
    y *= 40 / dist;
  }
  stick.style.left = 35 + x + "px";
  stick.style.top = 35 + y + "px";
  moveX = x / 40;
  moveY = y / 40;
});

// BUTTONS
document.getElementById("shoot").ontouchstart = () => kick(0.6);
document.getElementById("pass").ontouchstart = () => kick(0.4);

function kick(power) {
  const dx = ball.x - player.x;
  const dy = ball.y - player.y;
  const d = Math.hypot(dx, dy);
  if (d < 20) {
    ball.vx = dx * power;
    ball.vy = dy * power;
  }
}

// GAME LOOP
function update() {
  player.x += moveX * player.speed;
  player.y += moveY * player.speed;

  // Clamp
  player.x = Math.max(20, Math.min(780, player.x));
  player.y = Math.max(20, Math.min(480, player.y));

  // Dribble
  const dx = ball.x - player.x;
  const dy = ball.y - player.y;
  if (Math.hypot(dx, dy) < 20) {
    ball.x += (player.x - ball.x) * 0.1;
    ball.y += (player.y - ball.y) * 0.1;
  }

  ball.x += ball.vx;
  ball.y += ball.vy;
  ball.vx *= 0.98;
  ball.vy *= 0.98;
}

function draw() {
  ctx.clearRect(0,0,800,500);

  // Field
  ctx.strokeStyle = "white";
  ctx.lineWidth = 2;
  ctx.strokeRect(10,10,780,480);
  ctx.beginPath();
  ctx.moveTo(400,10);
  ctx.lineTo(400,490);
  ctx.stroke();

  // Player
  ctx.fillStyle = "blue";
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.r, 0, Math.PI*2);
  ctx.fill();

  // Ball
  ctx.fillStyle = "white";
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
  ctx.fill();
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>